#!/bin/bash
# Pre-commit hook: ã‚³ãƒŸãƒƒãƒˆå‰ã«ktlintã¨detektã‚’å®Ÿè¡Œ

echo "ğŸ” Running code quality checks..."

# ktlintã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ãƒã‚§ãƒƒã‚¯
echo "ğŸ“ Running ktlint format..."
./gradlew ktlintFormat --daemon || {
    echo "âŒ ktlint format failed"
    exit 1
}

echo "âœ… Running ktlint check..."
./gradlew ktlintCheck --daemon || {
    echo "âŒ ktlint check failed"
    echo "ğŸ’¡ Run './gradlew ktlintFormat' to fix formatting issues"
    exit 1
}

# detektã§é™çš„è§£æ
echo "ğŸ” Running detekt..."
./gradlew detekt --daemon || {
    echo "âŒ detekt check failed"
    echo "ğŸ’¡ Check detekt report in build/reports/detekt/"
    exit 1
}

echo "âœ… All checks passed! Proceeding with commit..."
exit 0
